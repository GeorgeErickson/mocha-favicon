/*! mocha-favicon - v0.0.1 - 2013-04-26 - George Erickson*/
(function(A){if(!A.favicon){var e,n,t,i=A.document.getElementsByTagName("head")[0],a=null,l=function(A){for(var e=new Image,n=0;A.length>n;n++)e.src=A[n]},o=function(A){var e=document.createElement("link");e.type="image/x-icon",e.rel="icon",e.href=A,r(),i.appendChild(e)},r=function(){for(var A=i.getElementsByTagName("link"),e=A.length;--e>=0;/\bicon\b/i.test(A[e].getAttribute("rel"))&&i.removeChild(A[e]));};A.favicon={defaultPause:2e3,change:function(A,e){clearTimeout(a),e&&(document.title=e),""!==A&&o(A)},animate:function(A,i){clearTimeout(a);var r=this;l(A),n=A,e=i?i:r.defaultPause,t=0,r.change(n[0]),a=setTimeout(function c(){t=(t+1)%n.length,o(n[t]),a=setTimeout(c,e)},e)},stopAnimate:function(){clearTimeout(a)}}}})(this),function(){var A={},e=null,n=null,t=document.title,i=null,a=null,l={},o={width:7,height:9,font:"10px arial",colour:"#ffffff",background:"#F03D25",fallback:!0,abbreviate:!0},r=function(){var A=navigator.userAgent.toLowerCase();return function(e){return-1!==A.indexOf(e)}}(),c={ie:r("msie"),chrome:r("chrome"),webkit:r("chrome")||r("safari"),safari:r("safari")&&!r("chrome"),mozilla:r("mozilla")&&!r("chrome")&&!r("safari")},u=function(){for(var A=document.getElementsByTagName("link"),e=0,n=A.length;n>e;e++)if((A[e].getAttribute("rel")||"").match(/\bicon\b/))return A[e];return!1},g=function(){for(var A=document.getElementsByTagName("link"),e=document.getElementsByTagName("head")[0],n=0,t=A.length;t>n;n++){var i=A[n]!==void 0;i&&(A[n].getAttribute("rel")||"").match(/\bicon\b/)&&e.removeChild(A[n])}},f=function(){if(!n||!e){var A=u();n=e=A?A.getAttribute("href"):"/favicon.ico"}return e},s=function(){return a||(a=document.createElement("canvas"),a.width=16,a.height=16),a},m=function(A){g();var e=document.createElement("link");e.type="image/x-icon",e.rel="icon",e.href=A,document.getElementsByTagName("head")[0].appendChild(e)},h=function(A,e){if(!s().getContext||c.ie||c.safari||"force"===l.fallback)return M(A);var n=s().getContext("2d"),e=e||"#000000",t=f();i=new Image,i.onload=function(){n.clearRect(0,0,16,16),n.drawImage(i,0,0,i.width,i.height,0,0,16,16),(A+"").length>0&&v(n,A,e),E()},t.match(/^data/)||(i.crossOrigin="anonymous"),i.src=t},M=function(A){l.fallback&&(document.title=(A+"").length>0?"("+A+") "+t:t)},v=function(A,e){"number"==typeof e&&e>99&&l.abbreviate&&(e=D(e));var n=(e+"").length-1,t=l.width+6*n,i=16-t,a=16-l.height;A.font=(c.webkit?"bold ":"")+l.font,A.fillStyle=l.background,A.strokeStyle=l.background,A.lineWidth=1,A.fillRect(i,a,t-1,l.height),A.beginPath(),A.moveTo(i-.5,a+1),A.lineTo(i-.5,15),A.stroke(),A.beginPath(),A.moveTo(15.5,a+1),A.lineTo(15.5,15),A.stroke(),A.beginPath(),A.strokeStyle="rgba(0,0,0,0.3)",A.moveTo(i,16),A.lineTo(15,16),A.stroke(),A.fillStyle=l.colour,A.textAlign="right",A.textBaseline="top",A.fillText(e,15,c.mozilla?7:6)},E=function(){s().getContext&&m(s().toDataURL())},D=function(A){for(var e=[["G",1e9],["M",1e6],["k",1e3]],n=0;e.length>n;++n)if(A>=e[n][1]){A=b(A/e[n][1])+e[n][0];break}return A},b=function(A,e){var n=new Number(A);return n.toFixed(e)};A.setOptions=function(A){l={};for(var e in o)l[e]=A.hasOwnProperty(e)?A[e]:o[e];return this},A.setImage=function(A){return e=A,E(),this},A.setBubble=function(A,e){return A=A||"",h(A,e),this},A.reset=function(){m(n)},A.setOptions(o),window.Tinycon=A}(),function(){var A;A="undefined"!=typeof exports&&null!==exports?exports:this,A.MochaFavicon=function(A){var e,n,t,i;return i=function(A){return A},n={fail:i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAVFBMVEX///+AAADMAACqAACSAACfAADNAADMAADKAADIAADMAADMAADMAADLAADMAADMAADLAADJAADKAADMAADKAADMAADMAADLAADKAADKAADMAADMAACTp2L9AAAAG3RSTlMABAUGBwh1eHl+gYaVl5qgoam2vcDCw8TFxsiFO5zWAAAAmUlEQVQYGa3BSULCQAAAwUZwQRFBEJf+/z9NZjJrkhtV3NEjtT96uqPQX1oOdiQOvqkZbIkMbhROHhg5uZGYbQCzK5GVDVauBK76IXLFF4mLLhQu+KTmzJmWnRM9G+/M2GDGDh1naLiAiovIXMHEVQRvVg5YI3g1OwAWTPZOjoxMyPYGRyIjKi8OPkgc0XjWE4VK5+lMTe7mHxQDMdCbJ1M7AAAAAElFTkSuQmCC"),pass:i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAASFBMVEX///8A/wAA//8A/6oA/8wA1bMA2LEA1K0A0bMA1rAA0a4A1q4A07EA1rAA17IA1K8A1rEA1rAA17EA1rIA1rIA1LAA1rIA1rK6jUPZAAAAF3RSTlMAAQEDBR4nNUNKX3uGlJ6sra7E6/Hz/kQklvsAAAB0SURBVDjLtdM3DsNADERRyjln693/pi4kV5aWBhbLisB8DBgjGsUTzOsa61Grb+BWYbBO9IA+A1oY7N2H5DENgN03W/wCW7AqlHgcp9PjPFnbeyAKPYKuNARjLOeAg//u6FWx57hkQOBaBLrEICIF4tTijT/Uow53R9nCkQAAAABJRU5ErkJggg=="),pending:i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAh1BMVEX///8A//8AgP8AgIAAmcwAgKoAgNUAgJ8AgK8AlLwAmbMAl8YElMEJk8EGk8EGlcEHlcQJmMQKk8EKlsUKlsQIlsMLmMIKlsIIlsIIlsMLlMMLl8MJlsQKlcQJlcIJl8IJl8UJlcQKl8QJlcQKlsMLlsQLl8QJl8QJl8QJlcIJl8IJlcQLl8QZb/IfAAAALHRSTlMAAQIEBQYGCBATFDE+V1pbbHSAg4WIj6CipampsbTIycnK0tvn6fL5+vv8/ROxWxQAAACvSURBVBgZrcFXQsJAAAXAZ0HF3hv2Xub+5zMLEROy/jGTJTvRuMg/XvzJ0JmetyzQuE/rWCM9Gul4QjowSc8YmbvmPAvWkV/IwCmjzHyQCmSGq1SskBlSxSTFI6lCCqTqkBTcpWpECu5SNSIF36naJcUnqXomxQ6p4itTjFPDZqaQinfSYj9D3KaFDCBzyAKkA1vpwkG6NDL3ir30KW7WktVLRQaOdDykZkNrO8v0A0kPIWM0HLDMAAAAAElFTkSuQmCC")},t="Running",favicon.change(n.pending,t),e=0,A.on("test end",function(){return e+=1,document.title=""+t+" ["+e+"]"}),A.on("fail",function(){return Tinycon.setBubble(A.failures,"red"),t="Failing"}),A.on("end",function(){return A.failures?favicon.change(n.fail,"Fail "+A.failures+"/"+A.total):favicon.change(n.pass,"Pass "+A.total)})}}.call(this);